"use strict";

;
/*_______________*/

function add_text(active_bot) {
  var inp_name = document.querySelector("input[name='name']");
  var inp_description = document.querySelector("textarea[name='description']");
  var users = document.querySelector('#users');
  inp_name.value = active_bot.name;
  inp_description.textContent = active_bot.description;
  users.textContent = "".concat(active_bot.usersAlive, " / ").concat(active_bot.usersTotal);
}

;

function click_bot(data) {
  var bots_el = document.querySelectorAll('.bot');
  var bots_new = document.querySelectorAll('.bar__el');

  if (localStorage.active_bot) {
    var save_bot = localStorage.active_bot;
    clear_class();
    bots_new[save_bot].classList.add('_active');
  }

  bots_el.forEach(function (el, index) {
    el.onclick = function () {
      clear_class();
      el.parentNode.classList.add('_active');
      add_text(data[index]);

      if (index !== active_index) {
        add_text(newBots[index]);
        localStorage.setItem('active_bot', index);
      }
    };
  });

  function clear_class() {
    bots_el.forEach(function (el) {
      el.parentNode.classList.remove('_active');
    });
  }
}

;

function edit() {
  var edit_btn = document.querySelector('.edit');
  var save_btn = document.querySelector('.save');
  var form = document.querySelector('.form');
  var inp = document.querySelector("input[name='name']");

  edit_btn.onclick = function () {
    edit_btn.classList.toggle('_active');
    check_btn();
  };

  save_btn.onclick = function () {
    edit_btn.classList.toggle('_active');
    check_btn();
    save();
  };
  /*_______________func____*/


  function check_btn() {
    if (edit_btn.classList.contains('_active')) {
      save_btn.classList.remove('_active');
      form.classList.add('_active');
      inp.focus();
    } else {
      save_btn.classList.add('_active');
      form.classList.remove('_active');
    }
  }

  check_btn();
}

edit();
;
var BaseURL = 'http://136.244.96.201:16324/bots/list';
var active_index = 0;
var newBots = [];
sendRequest('GET', BaseURL).then(function (data) {
  addBots(data.bots);
  click_bot(data.bots);
  newBots = data.bots;
  live_search();
  console.log(data);
})["catch"](function (err) {
  return console.log(err);
});

function addBots(bots) {
  var list = document.querySelector('.bar__list');
  var old_bots = document.querySelectorAll('.bar__el');
  old_bots.forEach(function (el) {
    return el.remove();
  });
  bots.forEach(function (el) {
    list.insertAdjacentHTML('beforeEnd', "\n\t\t\t\t<li class=\"bar__el\">\n\t\t\t\t\t<div class=\"bot\">\n\t\t\t\t\t\t<h4 class=\"bot__name\">".concat(el.name, "</h4>\n\t\t\t\t\t\t<div class=\"bot__box\">\n\t\t\t\t\t\t\t<div class=\"bot__users\">\n\t\t\t\t\t\t\t\t<svg><use xlink:href= './assets/icons/svg/sprite.svg#users'></use></svg>\n\t\t\t\t\t\t\t\t<span class=\"value\">").concat(el.usersAlive, "</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bot__message\">\n\t\t\t\t\t\t\t\t<svg><use xlink:href= './assets/icons/svg/sprite.svg#message'></use></svg>\n\t\t\t\t\t\t\t\t<span class=\"value\">").concat(el.usersTotal, "</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t"));
  });

  if (localStorage.active_bot) {
    add_text(bots[localStorage.active_bot]);
  } else {
    add_text(bots[active_index]);
  }
}

;

function hamburger() {
  var hamburger = document.querySelector('.hamburger');
  var main = document.querySelector('.mainContent');
  var link_elems = document.querySelectorAll('.bar__el');
  var overlay = document.querySelector('.overlay');

  hamburger.onclick = function () {
    hamburger.classList.toggle('_active');
    check_h();
  };

  overlay.onclick = function () {
    hamburger.classList.remove('_active');
    check_h();
  };

  function check_h() {
    if (hamburger.classList.contains('_active')) {
      main.classList.add('_active');
      overlay.classList.add('_active');
    } else {
      main.classList.remove('_active');
      overlay.classList.remove('_active');
    }
  }

  link_elems.forEach(function (item, i) {
    item.onclick = function () {
      hamburger.classList.remove("_active");
      check_h();
    };
  });
}

hamburger();
;

function save() {
  var save_btn = document.querySelector('.save');
  var inp_name = document.querySelector("input[name='name']");
  var inp_description = document.querySelector("textarea[name='description']");
  var url = 'http://136.244.96.201:16324/bots/update';
  var body = {
    id: 0,
    name: String,
    description: String
  };
  body.name = inp_name.value;
  body.description = inp_description.value;
  body.id = newBots[active_index].id;
  sendRequest('POST', url, body).then(function (data) {
    addBots(data.bots);
    click_bot(data.bots);
    live_search();
  })["catch"](function (err) {
    return console.log(err);
  });
}

setInterval(function () {
  var elems = document.querySelectorAll('.bar__el');
  elems.forEach(function (el, index) {
    if (el.classList.contains('_active')) {
      active_index = index;
    }
  });
}, 100);

function send_message() {
  var form = document.querySelector('.form');
  form.addEventListener('submit', function (e) {
    e.preventDefault();

    _send();
  });
}

send_message();

function _send() {
  var inp_message = document.querySelector('textarea[name="message"]');
  var url = 'http://136.244.96.201:16324/send';
  var body = {
    id: Number,
    message: String
  };
  body.id = newBots[active_index].id;
  body.message = inp_message.value;
  sendRequest('POST', url, body).then(function (data) {
    console.log(data);
    inp_message.value = '';
  })["catch"](function (err) {
    return console.log(err);
  });
}

;

function live_search(search_inp, list) {
  search_inp = document.querySelector('.search__inp');
  list = document.querySelector('.bar');
  /*________________________________*/

  search_inp.oninput = function () {
    var value = search_inp.value.trim();
    var list_elms = list.querySelectorAll('li');

    if (value != '') {
      list_elms.forEach(function (el) {
        if (el.innerText.search(value) == -1) {
          el.classList.add('_hide');
        } else {
          el.classList.remove('_hide');
        }
      });
    } else {
      list_elms.forEach(function (e) {
        return e.classList.remove('_hide');
      });
    }
  };
}

;

function sendRequest(method, url) {
  var body = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  return new Promise(function (resolve, reject) {
    var xhr = new XMLHttpRequest();
    xhr.open(method, url);
    xhr.responseType = 'json';
    xhr.setRequestHeader('Content-Type', 'application/json');

    xhr.onload = function () {
      if (xhr.status >= 400) {
        reject(xhr.response);
      } else {
        resolve(xhr.response);
      }
    };

    xhr.onerror = function () {
      reject(xhr.response);
    };

    xhr.send(JSON.stringify(body));
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJibG9ja3MvYWRkX3RleHQuanMiLCJibG9ja3MvY2xpY2tfYm90LmpzIiwiYmxvY2tzL2VkaXQuanMiLCJibG9ja3MvR0VUX2JvdHMuanMiLCJibG9ja3MvaGFtYnVyZ2VyLmpzIiwiYmxvY2tzL3NhdmUuanMiLCJibG9ja3Mvc2VuZF9tZXNzYWdlLmpzIiwiYmxvY2tzL3RlbXBsYXRlcy9saXZlX3NlYXJjaC5qcyIsImJsb2Nrcy90ZW1wbGF0ZXMvcmVxLmpzIl0sIm5hbWVzIjpbImFkZF90ZXh0IiwiYWN0aXZlX2JvdCIsImlucF9uYW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5wX2Rlc2NyaXB0aW9uIiwidXNlcnMiLCJ2YWx1ZSIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsImRlc2NyaXB0aW9uIiwidXNlcnNBbGl2ZSIsInVzZXJzVG90YWwiLCJjbGlja19ib3QiLCJkYXRhIiwiYm90c19lbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJib3RzX25ldyIsImxvY2FsU3RvcmFnZSIsInNhdmVfYm90IiwiY2xlYXJfY2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJmb3JFYWNoIiwiZWwiLCJpbmRleCIsIm9uY2xpY2siLCJwYXJlbnROb2RlIiwiYWN0aXZlX2luZGV4IiwibmV3Qm90cyIsInNldEl0ZW0iLCJyZW1vdmUiLCJlZGl0IiwiZWRpdF9idG4iLCJzYXZlX2J0biIsImZvcm0iLCJpbnAiLCJ0b2dnbGUiLCJjaGVja19idG4iLCJzYXZlIiwiY29udGFpbnMiLCJmb2N1cyIsIkJhc2VVUkwiLCJzZW5kUmVxdWVzdCIsInRoZW4iLCJhZGRCb3RzIiwiYm90cyIsImxpdmVfc2VhcmNoIiwiY29uc29sZSIsImxvZyIsImVyciIsImxpc3QiLCJvbGRfYm90cyIsImluc2VydEFkamFjZW50SFRNTCIsImhhbWJ1cmdlciIsIm1haW4iLCJsaW5rX2VsZW1zIiwib3ZlcmxheSIsImNoZWNrX2giLCJpdGVtIiwiaSIsInVybCIsImJvZHkiLCJpZCIsIlN0cmluZyIsInNldEludGVydmFsIiwiZWxlbXMiLCJzZW5kX21lc3NhZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiX3NlbmQiLCJpbnBfbWVzc2FnZSIsIk51bWJlciIsIm1lc3NhZ2UiLCJzZWFyY2hfaW5wIiwib25pbnB1dCIsInRyaW0iLCJsaXN0X2VsbXMiLCJpbm5lclRleHQiLCJzZWFyY2giLCJtZXRob2QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJzdGF0dXMiLCJyZXNwb25zZSIsIm9uZXJyb3IiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQ0FBOztBQUlBLFNBQUFBLFFBQUEsQ0FBQUMsVUFBQSxFQUFBO0FBRUEsTUFBQUMsUUFBQSxHQUFBQyxRQUFBLENBQUFDLGFBQUEsQ0FBQSxvQkFBQSxDQUFBO0FBQ0EsTUFBQUMsZUFBQSxHQUFBRixRQUFBLENBQUFDLGFBQUEsQ0FBQSw4QkFBQSxDQUFBO0FBQ0EsTUFBQUUsS0FBQSxHQUFBSCxRQUFBLENBQUFDLGFBQUEsQ0FBQSxRQUFBLENBQUE7QUFFQUYsRUFBQUEsUUFBQSxDQUFBSyxLQUFBLEdBQUFOLFVBQUEsQ0FBQU8sSUFBQTtBQUNBSCxFQUFBQSxlQUFBLENBQUFJLFdBQUEsR0FBQVIsVUFBQSxDQUFBUyxXQUFBO0FBQ0FKLEVBQUFBLEtBQUEsQ0FBQUcsV0FBQSxhQUFBUixVQUFBLENBQUFVLFVBQUEsZ0JBQUFWLFVBQUEsQ0FBQVcsVUFBQTtBQUdBOztBQUVBOztBQ2pCQSxTQUFBQyxTQUFBLENBQUFDLElBQUEsRUFBQTtBQUNBLE1BQUFDLE9BQUEsR0FBQVosUUFBQSxDQUFBYSxnQkFBQSxDQUFBLE1BQUEsQ0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQWQsUUFBQSxDQUFBYSxnQkFBQSxDQUFBLFVB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QSxFQUFBO0FBQ0EsUUFBQUMsR0FBQSxHQUFBLElBQUFDLGNBQUEsRUFBQTtBQUVBRCxJQUFBQSxHQUFBLENBQUFFLElBQUEsQ0FBQU4sTUFBQSxFQUFBcEIsR0FBQTtBQUNBd0IsSUFBQUEsR0FBQSxDQUFBRyxZQUFBLEdBQUEsTUFBQTtBQUNBSCxJQUFBQSxHQUFBLENBQUFJLGdCQUFBLENBQUEsY0FBQSxFQUFBLGtCQUFBOztBQUVBSixJQUFBQSxHQUFBLENBQUFLLE1BQUEsR0FBQSxZQUFBO0FBQ0EsVUFBQUwsR0FBQSxDQUFBTSxNQUFBLElBQUEsR0FBQSxFQUFBO0FBQ0FQLFFBQUFBLE1BQUEsQ0FBQUMsR0FBQSxDQUFBTyxRQUFBLENBQUE7QUFDQSxPQUZBLE1BRUE7QUFDQVQsUUFBQUEsT0FBQSxDQUFBRSxHQUFBLENBQUFPLFFBQUEsQ0FBQTtBQUNBO0FBQ0EsS0FOQTs7QUFRQVAsSUFBQUEsR0FBQSxDQUFBUSxPQUFBLEdBQUEsWUFBQTtBQUNBVCxNQUFBQSxNQUFBLENBQUFDLEdBQUEsQ0FBQU8sUUFBQSxDQUFBO0FBQ0EsS0FGQTs7QUFLQVAsSUFBQUEsR0FBQSxDQUFBUyxJQUFBLENBQUFDLElBQUEsQ0FBQUMsU0FBQSxDQUFBbEMsSUFBQSxDQUFBO0FBQ0EsR0FyQkEsQ0FBQTtBQXNCQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiIsIi8qX19fX19fX19fX19fX19fKi9cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gYWRkX3RleHQoYWN0aXZlX2JvdCl7XHJcblxyXG5cdGNvbnN0IGlucF9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0W25hbWU9J25hbWUnXVwiKTtcclxuXHRjb25zdCBpbnBfZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFbbmFtZT0nZGVzY3JpcHRpb24nXVwiKTtcclxuXHRjb25zdCB1c2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VycycpO1xyXG5cclxuXHRpbnBfbmFtZS52YWx1ZSA9IGFjdGl2ZV9ib3QubmFtZTtcclxuXHRpbnBfZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBhY3RpdmVfYm90LmRlc2NyaXB0aW9uO1xyXG5cdHVzZXJzLnRleHRDb250ZW50ID0gYCR7YWN0aXZlX2JvdC51c2Vyc0FsaXZlfSAvICR7YWN0aXZlX2JvdC51c2Vyc1RvdGFsfWBcclxuXHJcblxyXG59XHJcblxyXG4iLCJmdW5jdGlvbiBjbGlja19ib3QoZGF0YSl7XHJcblx0bGV0IGJvdHNfZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYm90Jyk7XHJcblx0bGV0IGJvdHNfbmV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhcl9fZWwnKTtcclxuXHJcblxyXG5cdGlmKGxvY2FsU3RvcmFnZS5hY3RpdmVfYm90KXtcdFx0XHJcblx0XHRsZXQgc2F2ZV9ib3QgPSBsb2NhbFN0b3JhZ2UuYWN0aXZlX2JvdDtcclxuXHRcdGNsZWFyX2NsYXNzKCk7XHJcblx0XHRib3RzX25ld1tzYXZlX2JvdF0uY2xhc3NMaXN0LmFkZCgnX2FjdGl2ZScpO1xyXG5cdH1cclxuXHJcblxyXG5cdGJvdHNfZWwuZm9yRWFjaCgoZWwsIGluZGV4KT0+e1xyXG5cdFx0ZWwub25jbGljayA9ICgpPT57XHJcblx0XHRcdGNsZWFyX2NsYXNzKCk7XHJcblx0XHRcdGVsLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnX2FjdGl2ZScpXHJcblx0XHRcdGFkZF90ZXh0KGRhdGFbaW5kZXhdKTtcclxuXHJcblx0XHRcdFx0aWYoaW5kZXggIT09IGFjdGl2ZV9pbmRleCl7XHJcblx0XHRcdFx0XHRhZGRfdGV4dChuZXdCb3RzW2luZGV4XSlcclxuXHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY3RpdmVfYm90JywgaW5kZXgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdH1cclxuXHR9KVxyXG5cclxuXHRmdW5jdGlvbiBjbGVhcl9jbGFzcygpe1xyXG5cdFx0Ym90c19lbC5mb3JFYWNoKChlbCk9PntcclxuXHRcdFx0ZWwucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdfYWN0aXZlJylcclxuXHRcdH0pXHJcblx0fVxyXG5cclxufVxyXG5cclxuXHJcbiIsImZ1bmN0aW9uIGVkaXQoKXtcclxuXHRjb25zdCBlZGl0X2J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0Jyk7XHJcblx0Y29uc3Qgc2F2ZV9idG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2F2ZScpO1xyXG5cdGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG5cdGNvbnN0IGlucCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtuYW1lPSduYW1lJ11cIik7XHJcblxyXG5cdGVkaXRfYnRuLm9uY2xpY2sgPSAoKT0+e1xyXG5cdFx0ZWRpdF9idG4uY2xhc3NMaXN0LnRvZ2dsZSgnX2FjdGl2ZScpO1xyXG5cdFx0Y2hlY2tfYnRuKCk7XHJcblx0fVxyXG5cclxuXHRzYXZlX2J0bi5vbmNsaWNrID0gKCk9PntcclxuXHRcdGVkaXRfYnRuLmNsYXNzTGlzdC50b2dnbGUoJ19hY3RpdmUnKTtcclxuXHRcdGNoZWNrX2J0bigpO1x0XHRcdFx0XHJcblx0XHRzYXZlKCk7XHJcblx0fVxyXG5cclxuXHJcbi8qX19fX19fX19fX19fX19fZnVuY19fX18qL1xyXG5cclxuXHRmdW5jdGlvbiBjaGVja19idG4oKXtcclxuXHRcdGlmKGVkaXRfYnRuLmNsYXNzTGlzdC5jb250YWlucygnX2FjdGl2ZScpKXtcclxuXHRcdFx0c2F2ZV9idG4uY2xhc3NMaXN0LnJlbW92ZSgnX2FjdGl2ZScpO1xyXG5cdFx0XHRmb3JtLmNsYXNzTGlzdC5hZGQoJ19hY3RpdmUnKTtcclxuXHRcdFx0aW5wLmZvY3VzKCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0c2F2ZV9idG4uY2xhc3NMaXN0LmFkZCgnX2FjdGl2ZScpO1xyXG5cdFx0XHRmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ19hY3RpdmUnKTtcdFx0XHRcclxuXHRcdH1cclxuXHR9XHJcblx0Y2hlY2tfYnRuKCk7XHJcblxyXG5cclxuXHJcbn1cclxuZWRpdCgpOyIsIlxyXG5jb25zdCBCYXNlVVJMID0gJ2h0dHA6Ly8xMzYuMjQ0Ljk2LjIwMToxNjMyNC9ib3RzL2xpc3QnO1xyXG5sZXQgYWN0aXZlX2luZGV4ID0gMDtcclxubGV0IG5ld0JvdHMgPSBbXTtcclxuXHJcbnNlbmRSZXF1ZXN0KCdHRVQnLCBCYXNlVVJMKVxyXG5cdC50aGVuKGRhdGEgPT4ge1xyXG5cdFx0YWRkQm90cyhkYXRhLmJvdHMpO1xyXG5cdFx0Y2xpY2tfYm90KGRhdGEuYm90cyk7XHJcblx0XHRuZXdCb3RzID0gZGF0YS5ib3RzO1xyXG5cdFx0bGl2ZV9zZWFyY2goKTtcclxuXHRcdGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gYWRkQm90cyhib3RzKXtcclxuXHRjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhcl9fbGlzdCcpO1xyXG5cdGNvbnN0IG9sZF9ib3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhcl9fZWwnKTtcclxuXHJcblxyXG5cdG9sZF9ib3RzLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpXHJcblxyXG5cdGJvdHMuZm9yRWFjaCgoZWwpPT57XHJcblx0XHRsaXN0Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlRW5kJywgXHJcblx0XHRcdGBcclxuXHRcdFx0XHQ8bGkgY2xhc3M9XCJiYXJfX2VsXCI+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiYm90XCI+XHJcblx0XHRcdFx0XHRcdDxoNCBjbGFzcz1cImJvdF9fbmFtZVwiPiR7ZWwubmFtZX08L2g0PlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiYm90X19ib3hcIj5cclxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiYm90X191c2Vyc1wiPlxyXG5cdFx0XHRcdFx0XHRcdFx0PHN2Zz48dXNlIHhsaW5rOmhyZWY9ICcuL2Fzc2V0cy9pY29ucy9zdmcvc3ByaXRlLnN2ZyN1c2Vycyc+PC91c2U+PC9zdmc+XHJcblx0XHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInZhbHVlXCI+JHtlbC51c2Vyc0FsaXZlfTwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiYm90X19tZXNzYWdlXCI+XHJcblx0XHRcdFx0XHRcdFx0XHQ8c3ZnPjx1c2UgeGxpbms6aHJlZj0gJy4vYXNzZXRzL2ljb25zL3N2Zy9zcHJpdGUuc3ZnI21lc3NhZ2UnPjwvdXNlPjwvc3ZnPlxyXG5cdFx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPiR7ZWwudXNlcnNUb3RhbH08L3NwYW4+XHJcblx0XHRcdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0PC9saT5cclxuXHRcdFx0YFxyXG5cdFx0KVxyXG5cdH0pXHJcblxyXG5cdGlmKGxvY2FsU3RvcmFnZS5hY3RpdmVfYm90KXtcdFx0XHJcblx0XHRhZGRfdGV4dChib3RzW2xvY2FsU3RvcmFnZS5hY3RpdmVfYm90XSlcclxuXHR9ZWxzZXtcdFx0XHJcblx0XHRhZGRfdGV4dChib3RzW2FjdGl2ZV9pbmRleF0pXHJcblx0fVxyXG59XHJcblxyXG5cclxuXHJcblxyXG4iLCJcclxuXHJcbmZ1bmN0aW9uIGhhbWJ1cmdlcigpIHtcclxuICB2YXIgaGFtYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhhbWJ1cmdlcicpO1xyXG4gIHZhciBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW5Db250ZW50Jyk7XHJcbiAgdmFyIGxpbmtfZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmFyX19lbCcpO1xyXG4gIHZhciBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm92ZXJsYXknKTtcclxuXHJcbiAgaGFtYnVyZ2VyLm9uY2xpY2sgPSAoKT0+IHtcclxuICAgIGhhbWJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKCdfYWN0aXZlJyk7XHJcbiAgICBjaGVja19oKCk7XHJcbiAgfTtcclxuXHJcbiAgb3ZlcmxheS5vbmNsaWNrID0gKCk9PntcclxuICAgIGhhbWJ1cmdlci5jbGFzc0xpc3QucmVtb3ZlKCdfYWN0aXZlJyk7XHJcbiAgICBjaGVja19oKCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZnVuY3Rpb24gY2hlY2tfaCgpe1xyXG4gIFx0aWYoaGFtYnVyZ2VyLmNsYXNzTGlzdC5jb250YWlucygnX2FjdGl2ZScpKXtcclxuICAgIFx0bWFpbi5jbGFzc0xpc3QuYWRkKCdfYWN0aXZlJyk7XHJcbiAgICBcdG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnX2FjdGl2ZScpO1xyXG4gIFx0fWVsc2V7ICBcdFx0XHJcbiAgICBcdG1haW4uY2xhc3NMaXN0LnJlbW92ZSgnX2FjdGl2ZScpO1xyXG4gICAgXHRvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ19hY3RpdmUnKTtcclxuICBcdH1cclxuICB9XHJcblxyXG5cclxuICBsaW5rX2VsZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcclxuICAgIGl0ZW0ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgaGFtYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUoXCJfYWN0aXZlXCIpO1xyXG4gICAgICBjaGVja19oKCk7XHJcbiAgICB9O1xyXG4gIH0pO1xyXG59XHJcblxyXG5oYW1idXJnZXIoKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJmdW5jdGlvbiBzYXZlKCl7XHJcblx0Y29uc3Qgc2F2ZV9idG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2F2ZScpO1xyXG5cdGNvbnN0IGlucF9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0W25hbWU9J25hbWUnXVwiKTtcclxuXHRjb25zdCBpbnBfZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFbbmFtZT0nZGVzY3JpcHRpb24nXVwiKTtcclxuXHJcblxyXG5cdGxldCB1cmwgPSAnaHR0cDovLzEzNi4yNDQuOTYuMjAxOjE2MzI0L2JvdHMvdXBkYXRlJztcclxuXHRsZXQgYm9keSA9IHtcclxuXHRcdGlkOiAwLFxyXG5cdFx0bmFtZTogU3RyaW5nLFxyXG5cdFx0ZGVzY3JpcHRpb246IFN0cmluZ1xyXG5cdH1cclxuXHJcblx0Ym9keS5uYW1lID0gaW5wX25hbWUudmFsdWU7XHJcblx0Ym9keS5kZXNjcmlwdGlvbiA9IGlucF9kZXNjcmlwdGlvbi52YWx1ZTtcclxuXHRib2R5LmlkID0gbmV3Qm90c1thY3RpdmVfaW5kZXhdLmlkO1xyXG5cclxuXHRzZW5kUmVxdWVzdCgnUE9TVCcsIHVybCwgYm9keSlcclxuXHRcdC50aGVuKGRhdGEgPT4ge1xyXG5cdFx0XHRhZGRCb3RzKGRhdGEuYm90cylcclxuXHRcdFx0Y2xpY2tfYm90KGRhdGEuYm90cyk7XHJcblx0XHRcdGxpdmVfc2VhcmNoKCk7XHJcblx0ICB9KVxyXG5cdCAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG5cclxufVxyXG5cclxuXHJcblxyXG5zZXRJbnRlcnZhbCgoKT0+e1xyXG5cdGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXJfX2VsJyk7XHJcblxyXG5cdGVsZW1zLmZvckVhY2goKGVsLCBpbmRleCk9PiB7XHJcblx0XHRpZihlbC5jbGFzc0xpc3QuY29udGFpbnMoJ19hY3RpdmUnKSl7XHJcblx0XHRcdGFjdGl2ZV9pbmRleCA9IGluZGV4O1xyXG5cdFx0fVxyXG5cdH0pXHJcblxyXG5cclxufSwxMDApIiwiXHJcbmZ1bmN0aW9uIHNlbmRfbWVzc2FnZSgpe1xyXG5cdGxldCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuXHJcblx0Zm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSk9PntcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdF9zZW5kKCk7XHJcblx0fSlcclxuXHJcblxyXG5cclxufVxyXG5cclxuc2VuZF9tZXNzYWdlKCk7XHJcblxyXG5cclxuZnVuY3Rpb24gX3NlbmQoKXtcclxuXHRsZXQgaW5wX21lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYVtuYW1lPVwibWVzc2FnZVwiXScpXHJcblx0bGV0IHVybCA9ICdodHRwOi8vMTM2LjI0NC45Ni4yMDE6MTYzMjQvc2VuZCc7XHJcblx0XHJcblx0bGV0IGJvZHkgPSB7XHJcblx0XHRpZDogTnVtYmVyLFxyXG5cdFx0bWVzc2FnZTogU3RyaW5nXHJcblx0fVxyXG5cclxuXHRib2R5LmlkID0gbmV3Qm90c1thY3RpdmVfaW5kZXhdLmlkO1xyXG5cdGJvZHkubWVzc2FnZSA9IGlucF9tZXNzYWdlLnZhbHVlO1xyXG5cclxuXHRzZW5kUmVxdWVzdCgnUE9TVCcsIHVybCwgYm9keSlcclxuXHRcdC50aGVuKGRhdGEgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhkYXRhKTtcclxuXHRcdFx0aW5wX21lc3NhZ2UudmFsdWUgPSAnJztcclxuXHQgIH0pXHJcblx0ICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXHJcblxyXG59IiwiZnVuY3Rpb24gbGl2ZV9zZWFyY2goc2VhcmNoX2lucCwgbGlzdCl7XHJcblxyXG4gIHNlYXJjaF9pbnAgPSAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaF9faW5wJyk7XHJcbiAgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXInKTtcclxuXHJcblxyXG4vKl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fKi9cclxuICBzZWFyY2hfaW5wLm9uaW5wdXQgPSAoKT0+e1xyXG4gICAgbGV0IHZhbHVlID0gc2VhcmNoX2lucC52YWx1ZS50cmltKCk7XHJcbiAgICBsZXQgbGlzdF9lbG1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xyXG5cclxuICAgIGlmKHZhbHVlICE9ICcnKXtcclxuICAgICAgbGlzdF9lbG1zLmZvckVhY2goKGVsKT0+e1xyXG4gICAgICAgIGlmKGVsLmlubmVyVGV4dC5zZWFyY2godmFsdWUpID09IC0xKXtcclxuICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ19oaWRlJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdfaGlkZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1lbHNle1xyXG4gICAgICBsaXN0X2VsbXMuZm9yRWFjaChlPT4gZS5jbGFzc0xpc3QucmVtb3ZlKCdfaGlkZScpKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxufVxyXG4iLCJmdW5jdGlvbiBzZW5kUmVxdWVzdChtZXRob2QsIHVybCwgYm9keSA9IG51bGwpe1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xyXG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xyXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcclxuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpXHJcblxyXG4gICAgeGhyLm9ubG9hZCA9ICgpID0+e1xyXG4gICAgICBpZih4aHIuc3RhdHVzID49IDQwMCl7XHJcbiAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZSk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHhoci5vbmVycm9yID0gKCkgPT57XHJcbiAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB4aHIuc2VuZCggSlNPTi5zdHJpbmdpZnkoYm9keSkpO1xyXG4gIH0pXHJcbn0iXX0=
